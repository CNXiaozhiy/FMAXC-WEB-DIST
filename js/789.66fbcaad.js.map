{"version":3,"file":"js/789.66fbcaad.js","mappings":"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","sources":["webpack://FMAXC-WEB-VUE2/./src/pages/Account/Setting/General.vue","webpack://FMAXC-WEB-VUE2/src/pages/Account/Setting/General.vue","webpack://FMAXC-WEB-VUE2/./src/pages/Account/Setting/General.vue?16ca","webpack://FMAXC-WEB-VUE2/./src/pages/Account/Setting/General.vue?3e0a"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"card\",attrs:{\"id\":\"AccountSettingGeneral\"}},[_c('div',{staticClass:\"appearance\"},[_c('el-tooltip',{staticClass:\"item\",attrs:{\"content\":\"点我更改头像\",\"placement\":\"top\"}},[_c('div',{on:{\"click\":_vm.changePhoto}},[_c('el-avatar',{staticClass:\"user-photo\",attrs:{\"size\":80,\"src\":_vm.userInfo.userphoto},on:{\"click\":_vm.changePhoto}})],1)]),_c('input',{ref:\"file\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\"},on:{\"change\":function($event){return _vm.handleFileUpload($event)}}}),_c('div',{staticClass:\"identity-info\"},[_c('span',{staticClass:\"h4 font-weight-bolder\"},[_vm._v(\"用户昵称： \"+_vm._s(_vm.userInfo.nickname))]),_c('span',{staticClass:\"h6 username\"},[_vm._v(\"用户ID： \"+_vm._s(_vm.userInfo.username))])])],1),_c('hr'),_c('div',{staticClass:\"edit-appearance\"},[_c('label',{staticClass:\"font-weight-bolder mb-2 text-primary\"},[_vm._v(\"修改昵称：\")]),_c('el-input',{attrs:{\"id\":\"editUname\",\"placeholder\":\"请输入您的新昵称\"},model:{value:(_vm.editUname),callback:function ($$v) {_vm.editUname=$$v},expression:\"editUname\"}}),_c('hr'),_c('div',{staticClass:\"submit\"},[_c('button',{staticClass:\"btn btn-success\",on:{\"click\":_vm.modificationInfo}},[_vm._v(\"确认修改\")])])],1),_c('hr'),_vm._m(0)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',[_c('span',{staticClass:\"text-danger\"},[_vm._v(\"Tips: 更新不及时请刷新页面\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"card\" id=\"AccountSettingGeneral\">\n    <div class=\"appearance\">\n        <el-tooltip class=\"item\" content=\"点我更改头像\" placement=\"top\">\n            <div @click=\"changePhoto\">\n                <el-avatar @click=\"changePhoto\" :size=\"80\" :src=\"userInfo.userphoto\" class=\"user-photo\"></el-avatar>\n            </div>\n        </el-tooltip>\n        <input type=\"file\" ref=\"file\" style=\"display: none;\" v-on:change=\"handleFileUpload($event)\">\n        <div class=\"identity-info\">\n            <span class=\"h4 font-weight-bolder\">用户昵称： {{ userInfo.nickname }}</span>\n            <span class=\"h6 username\">用户ID： {{ userInfo.username }}</span>\n        </div>\n    </div>\n    <hr>\n    <div class=\"edit-appearance\">\n        <label class=\"font-weight-bolder mb-2 text-primary\">修改昵称：</label>\n        <el-input id=\"editUname\" v-model=\"editUname\" placeholder=\"请输入您的新昵称\"></el-input>\n        \n        <hr>\n        <div class=\"submit\">\n            <button class=\"btn btn-success\" @click=\"modificationInfo\">确认修改</button>\n        </div>\n    </div>\n    <hr>\n    <div>\n        <span class=\"text-danger\">Tips: 更新不及时请刷新页面</span>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport { modification } from '@/scripts/auth';\nexport default {\n    name: 'General',\n    data() {\n        return {\n            editUname: ''\n        }\n    },\n    computed: {\n        userInfo() {\n            return this.$store.state.userData.user.info;\n        }\n    },\n    async mounted() {\n    },\n    methods: {\n        changePhoto() {\n            console.log('更改头像');\n            this.$refs.file.click()\n        },\n        // 获取文件\n        handleFileUpload(event){\n            event.preventDefault();\n            let formData = new FormData()\n            let file = this.$refs.file.files[0]\n            formData.append('file',file)\n            this.onUpload(formData)\n        },\n        // 上传文件\n        onUpload (formData) {\n            // axios.postForm('/api/v1/upload', {\n            // file: formData // FileList will be unwrapped as sepate fields\n            // });\n            this.$store.dispatch('utils/request',{\n                vc: this,\n                method: 'post',\n                url: '/user/modification/avatar',\n                // url: '/upload',\n                ignore: true, // 不自动配置 strifty data 和 请求头\n                data: formData,\n            })\n            .then(res => {\n                if (res.data.status === 1) {\n                    this.$message.success('上传成功');\n                    this.$store.state.userData.pullData(true)\n                }\n            })\n        },\n        modificationInfo() {\n            if (this.editUname === '') {\n                return;\n            }\n            this.$confirm('确认修改昵称？此操作不可逆', '确认信息', {\n                distinguishCancelAndClose: true,\n                confirmButtonText: '确认',\n                cancelButtonText: '取消'\n                })\n            .then(() => {\n                modification({\n                    nickname: this.editUname\n                })\n                .then(\n                    this.$store.state.userData.pullData(true),\n                )\n            })\n            \n        }\n    }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.btn {\n  padding: 10px;\n}\n#AccountSettingGeneral {\n    .appearance {\n        display: flex;\n    }\n    .user-photo {\n        // height: 120px;\n        border-radius: 50%;\n        cursor: pointer;\n    }\n    .identity-info {\n        margin-left: 20px;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n    }\n    .edit-appearance {\n        display: flex;\n        flex-direction: column;\n        // margin-top: 20px;\n\n        .submit {\n            align-self: flex-end;\n        }\n    }\n}\n</style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./General.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./General.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./General.vue?vue&type=template&id=f56f9efc&scoped=true\"\nimport script from \"./General.vue?vue&type=script&lang=js\"\nexport * from \"./General.vue?vue&type=script&lang=js\"\nimport style0 from \"./General.vue?vue&type=style&index=0&id=f56f9efc&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f56f9efc\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","changePhoto","userInfo","userphoto","ref","staticStyle","$event","handleFileUpload","_v","_s","nickname","username","model","value","editUname","callback","$$v","expression","modificationInfo","_m","staticRenderFns","name","data","computed","$store","state","userData","user","info","mounted","methods","console","log","$refs","file","click","event","preventDefault","formData","FormData","files","append","onUpload","dispatch","vc","method","url","ignore","then","res","status","$message","success","pullData","$confirm","distinguishCancelAndClose","confirmButtonText","cancelButtonText","modification","component"],"sourceRoot":""}