"use strict";(self["webpackChunkFMAXC_WEB_VUE2"]=self["webpackChunkFMAXC_WEB_VUE2"]||[]).push([[169],{7550:function(t,e,s){s.r(e),s.d(e,{default:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card",attrs:{id:"AccountSettingGeneral"}},[e("div",{staticClass:"appearance"},[e("el-tooltip",{staticClass:"item",attrs:{content:"点我更改头像",placement:"top"}},[e("div",{on:{click:t.changePhoto}},[e("el-avatar",{staticClass:"user-photo",attrs:{size:120,src:t.userInfo.userphoto},on:{click:t.changePhoto}})],1)]),e("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(e){return t.handleFileUpload(e)}}}),e("div",{staticClass:"identity-info"},[e("span",{staticClass:"nickname font-weight-bolder"},[t._v("用户昵称： "+t._s(t.userInfo.nickname))]),e("span",{staticClass:"username"},[t._v("用户ID： "+t._s(t.userInfo.username))])])],1),e("hr"),e("div",{staticClass:"edit-appearance"},[e("label",{staticClass:"font-weight-bolder mb-2 text-primary"},[t._v("修改昵称：")]),e("el-input",{attrs:{id:"editUname",placeholder:"请输入您的新昵称"},model:{value:t.editUname,callback:function(e){t.editUname=e},expression:"editUname"}}),e("hr"),e("div",{staticClass:"submit"},[e("button",{staticClass:"btn btn-success",on:{click:t.modificationInfo}},[t._v("确认修改")])])],1),e("hr"),t._m(0)])},i=[function(){var t=this,e=t._self._c;return e("div",[e("span",{staticClass:"text-danger"},[t._v("Tips: 更新不及时请刷新页面")])])}],n=s(7363),o={name:"General",data(){return{editUname:""}},computed:{userInfo(){return this.$store.state.userData.user.info}},async mounted(){},methods:{changePhoto(){console.log("更改头像"),this.$refs.file.click()},handleFileUpload(t){t.preventDefault();let e=new FormData,s=this.$refs.file.files[0];e.append("file",s),this.onUpload(e)},onUpload(t){this.$store.dispatch("utils/request",{vc:this,method:"post",url:"/user/modification/avatar",ignore:!0,data:t}).then((t=>{1===t.data.status&&(this.$message.success("上传成功"),this.$store.state.userData.pullData(this,!1,!0))}))},modificationInfo(){""!==this.editUname&&this.$confirm("确认修改昵称？此操作不可逆","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then((()=>{(0,n.Ni)(this,{nickname:this.editUname}).then(this.$store.state.userData.pullData(this,!1,!0))}))}}},l=o,r=s(1656),c=(0,r.A)(l,a,i,!1,null,"b3240b94",null),u=c.exports}}]);
//# sourceMappingURL=169.36c8b79c.js.map