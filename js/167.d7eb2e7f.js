"use strict";(self["webpackChunkFMAXC_WEB_VUE2"]=self["webpackChunkFMAXC_WEB_VUE2"]||[]).push([[167],{7167:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{ref:"eventCard",staticClass:"card"},[t("div",{staticClass:"card-body"},[t("div",{staticClass:"card-title"},[t("h3",[t("font-awesome-icon",{attrs:{icon:["fas","database"]}}),e._v(" 公开数据表")],1),t("hr")]),t("vs-table",{ref:"table",scopedSlots:e._u([{key:"thead",fn:function(){return[t("vs-tr",[t("vs-th",[t("vs-checkbox",{attrs:{indeterminate:e.selected.length==e.events.length},on:{change:function(t){e.selected=e.$vs.checkAll(e.selected,e.events)}},model:{value:e.allCheck,callback:function(t){e.allCheck=t},expression:"allCheck"}})],1),t("vs-th",[e._v(" 事件名 ")]),t("vs-th",[e._v(" 事件ID ")])],1)]},proxy:!0},{key:"tbody",fn:function(){return e._l(e.$vs.getPage(e.events,e.page,e.max),(function(a,s){return t("vs-tr",{key:s,attrs:{data:a,"is-selected":!!e.selected.includes(a)},scopedSlots:e._u([{key:"expand",fn:function(){return[t("div",{staticClass:"con-content"},[t("div",{staticClass:"d-flex align-items-center"},[t("vs-button",{attrs:{warn:"",flat:""},on:{click:function(t){e.eventDatas=e.parseJsonData(a.jsonData)}}},[e._v("修改数据")])],1)])]},proxy:!0}],null,!0)},[t("vs-td",{staticStyle:{width:"5%"},attrs:{checkbox:""}},[t("vs-checkbox",{attrs:{val:a},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),t("vs-td",[e._v(" "+e._s(a.eventName)+" ")]),t("vs-td",[e._v(" "+e._s(a.eventID)+" ")])],1)}))},proxy:!0},{key:"footer",fn:function(){return[t("vs-pagination",{attrs:{length:e.$vs.getLength(e.events,e.max)},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})]},proxy:!0}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),t("div",{staticClass:"mt-3 card-title"},[t("h3",[t("font-awesome-icon",{attrs:{icon:["fas","wrench"]}}),e._v(" 修改数据表")],1),t("hr")]),t("vs-table",{ref:"table",scopedSlots:e._u([{key:"thead",fn:function(){return[t("vs-tr",[t("vs-th",[t("vs-checkbox",{attrs:{indeterminate:e.selectedEventData.length==e.eventDatas.length},on:{change:function(t){e.selectedEventData=e.$vs.checkAll(e.selectedEventData,e.eventDatas)}},model:{value:e.allCheckEventData,callback:function(t){e.allCheckEventData=t},expression:"allCheckEventData"}})],1),t("vs-th",[e._v(" 索引 ")]),t("vs-th",[e._v(" 事件数据 ")])],1)]},proxy:!0},{key:"tbody",fn:function(){return e._l(e.eventDatas,(function(a,s){return t("vs-tr",{key:s,attrs:{data:a,"is-selected":!!e.selectedEventData.includes(a)}},[t("vs-td",{staticStyle:{width:"5%"},attrs:{checkbox:""}},[t("vs-checkbox",{attrs:{val:a},model:{value:e.selectedEventData,callback:function(t){e.selectedEventData=t},expression:"selectedEventData"}})],1),t("vs-td",[e._v(" "+e._s(s)+" ")]),t("vs-td",[e._v(" "+e._s(a.toString())+" ")])],1)}))},proxy:!0}]),model:{value:e.selectedEventData,callback:function(t){e.selectedEventData=t},expression:"selectedEventData"}})],1)])])},n=[],c=a(3336),l=a.n(c),r={name:"Manage",data(){return{page:1,max:10,allCheck:!1,allCheckEventData:!1,events:[],eventDatas:[],selected:[],selectedEventData:[]}},mounted(){this.refreshData()},methods:{async refreshData(){const e=this.$vs.loading({target:this.$refs.eventCard});await this.$store.dispatch("utils/request",{method:"post",url:"/a/getPublicEventList"}).then((e=>{1===e.data.status?this.events=e.data.data:this.$toastx({type:"danger",title:"获取数据失败"})})),e.close()},parseJsonData(e){if(!e)return this.$swal("无数据"),{};var t=l().enc.Base64.parse(e);return JSON.parse(l().enc.Utf8.stringify(t)).data}}},v=r,o=a(1656),i=(0,o.A)(v,s,n,!1,null,null,null),d=i.exports}}]);
//# sourceMappingURL=167.d7eb2e7f.js.map