"use strict";(self["webpackChunkFMAXC_WEB_VUE2"]=self["webpackChunkFMAXC_WEB_VUE2"]||[]).push([[811],{3811:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card",attrs:{id:"AccountSettingGeneral"}},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"appearance"},[e("el-tooltip",{staticClass:"item",attrs:{content:"点我更改头像",placement:"top"}},[e("div",{on:{click:t.changePhoto}},[e("vs-avatar",{attrs:{size:"80"}},[e("img",{attrs:{src:t.userInfo.userphoto,alt:""}})])],1)]),e("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(e){return t.handleFileUpload(e)}}}),e("div",{staticClass:"identity-info"},[e("span",{staticClass:"h4 font-weight-bolder"},[t._v("用户昵称： "+t._s(t.userInfo.nickname))]),e("span",{staticClass:"h6 username"},[t._v("用户ID： "+t._s(t.userInfo.username))])])],1),e("hr"),e("div",{staticClass:"edit-appearance"},[e("label",{staticClass:"font-weight-bolder mb-2 text-primary"},[t._v("修改昵称：")]),e("el-input",{attrs:{id:"editUname",placeholder:"请输入您的新昵称"},model:{value:t.editUname,callback:function(e){t.editUname=e},expression:"editUname"}}),e("hr"),e("div",{staticClass:"submit"},[e("button",{staticClass:"btn btn-success",on:{click:t.modificationInfo}},[t._v("确认修改")])])],1),e("hr"),t._m(0)])])},i=[function(){var t=this,e=t._self._c;return e("div",[e("span",{staticClass:"text-danger"},[t._v("Tips: 更新不及时请刷新页面")])])}],n=a(7363),l=a(4187),r={name:"General",data(){return{editUname:""}},computed:{userInfo(){return this.$store.state.userData.user.info}},async mounted(){},methods:{changePhoto(){this.$refs.file.click()},handleFileUpload(t){t.preventDefault();let e=new FormData,a=this.$refs.file.files[0];e.append("file",a),this.onUpload(e)},onUpload(t){(0,l.A)("utils/request",{vc:this,method:"post",url:"/user/modification/avatar",ignore:!0,data:t}).then((t=>{1===t.data.status&&(this.$message.success("上传成功"),this.$store.state.userData.pullData(!0))}))},modificationInfo(){""!==this.editUname&&this.$swal({title:"确认修改昵称？",icon:"warning",showCancelButton:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then((t=>{t.isConfirmed&&(0,n.Ni)({nickname:this.editUname}).then(this.$store.state.userData.pullData(!0))}))}}},o=r,c=a(1656),u=(0,c.A)(o,s,i,!1,null,"6d0fb7c4",null),d=u.exports}}]);
//# sourceMappingURL=811.27be9b1a.js.map