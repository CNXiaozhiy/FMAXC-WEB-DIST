{"version":3,"file":"js/811.012396e7.js","mappings":"wKAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,OAAOC,MAAM,CAAC,GAAK,0BAA0B,CAACH,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,aAAa,CAACE,YAAY,OAAOC,MAAM,CAAC,QAAU,SAAS,UAAY,QAAQ,CAACH,EAAG,MAAM,CAACI,GAAG,CAAC,MAAQN,EAAIO,cAAc,CAACL,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,OAAO,CAACH,EAAG,MAAM,CAACG,MAAM,CAAC,IAAML,EAAIQ,SAASC,UAAU,IAAM,SAAS,KAAKP,EAAG,QAAQ,CAACQ,IAAI,OAAOC,YAAY,CAAC,QAAU,QAAQN,MAAM,CAAC,KAAO,QAAQC,GAAG,CAAC,OAAS,SAASM,GAAQ,OAAOZ,EAAIa,iBAAiBD,EAAO,KAAKV,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,OAAO,CAACE,YAAY,yBAAyB,CAACJ,EAAIc,GAAG,SAASd,EAAIe,GAAGf,EAAIQ,SAASQ,aAAad,EAAG,OAAO,CAACE,YAAY,eAAe,CAACJ,EAAIc,GAAG,SAASd,EAAIe,GAAGf,EAAIQ,SAASS,gBAAgB,GAAGf,EAAG,MAAMA,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,QAAQ,CAACE,YAAY,wCAAwC,CAACJ,EAAIc,GAAG,WAAWZ,EAAG,WAAW,CAACG,MAAM,CAAC,GAAK,YAAY,YAAc,YAAYa,MAAM,CAACC,MAAOnB,EAAIoB,UAAWC,SAAS,SAAUC,GAAMtB,EAAIoB,UAAUE,CAAG,EAAEC,WAAW,eAAerB,EAAG,MAAMA,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,SAAS,CAACE,YAAY,kBAAkBE,GAAG,CAAC,MAAQN,EAAIwB,mBAAmB,CAACxB,EAAIc,GAAG,aAAa,GAAGZ,EAAG,MAAMF,EAAIyB,GAAG,MACxvC,EACIC,EAAkB,CAAC,WAAY,IAAI1B,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,OAAO,CAACE,YAAY,eAAe,CAACJ,EAAIc,GAAG,uBAC/H,G,oBCoCA,GACAa,KAAA,UACAC,IAAAA,GACA,OACAR,UAAA,GAEA,EACAS,SAAA,CACArB,QAAAA,GACA,YAAAsB,OAAAC,MAAAC,SAAAC,KAAAC,IACA,GAEA,aAAAC,GAAA,EACAC,QAAA,CACA7B,WAAAA,GACA,KAAA8B,MAAAC,KAAAC,OACA,EAEA1B,gBAAAA,CAAA2B,GACAA,EAAAC,iBACA,IAAAC,EAAA,IAAAC,SACAL,EAAA,KAAAD,MAAAC,KAAAM,MAAA,GACAF,EAAAG,OAAA,OAAAP,GACA,KAAAQ,SAAAJ,EACA,EAEAI,QAAAA,CAAAJ,IACAK,EAAAA,EAAAA,GAAA,iBACAC,GAAA,KACAC,OAAA,OACAC,IAAA,4BACAC,QAAA,EACAvB,KAAAc,IACAU,MAAAC,IACA,IAAAA,EAAAzB,KAAA0B,SACA,KAAAC,SAAAC,QAAA,QACA,KAAA1B,OAAAC,MAAAC,SAAAyB,UAAA,GACA,GAEA,EACAjC,gBAAAA,GACA,UAAAJ,WAGA,KAAAsC,MAAA,CACAC,MAAA,UACAC,KAAA,UACAC,kBAAA,EACAC,kBAAA,KACAC,iBAAA,OACAX,MAAAY,IACAA,EAAAC,cACAC,EAAAA,EAAAA,IAAA,CACAlD,SAAA,KAAAI,YACAgC,KAAA,KAAAtB,OAAAC,MAAAC,SAAAyB,UAAA,GACA,GAEA,IChGwQ,I,UCQpQU,GAAY,OACd,EACApE,EACA2B,GACA,EACA,KACA,WACA,MAIF,EAAeyC,EAAiB,O","sources":["webpack://FMAXC-WEB-VUE2/./src/pages/Account/Setting/General.vue","webpack://FMAXC-WEB-VUE2/src/pages/Account/Setting/General.vue","webpack://FMAXC-WEB-VUE2/./src/pages/Account/Setting/General.vue?16ca","webpack://FMAXC-WEB-VUE2/./src/pages/Account/Setting/General.vue?3e0a"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"card\",attrs:{\"id\":\"AccountSettingGeneral\"}},[_c('div',{staticClass:\"card-body\"},[_c('div',{staticClass:\"appearance\"},[_c('el-tooltip',{staticClass:\"item\",attrs:{\"content\":\"点我更改头像\",\"placement\":\"top\"}},[_c('div',{on:{\"click\":_vm.changePhoto}},[_c('vs-avatar',{attrs:{\"size\":\"80\"}},[_c('img',{attrs:{\"src\":_vm.userInfo.userphoto,\"alt\":\"\"}})])],1)]),_c('input',{ref:\"file\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\"},on:{\"change\":function($event){return _vm.handleFileUpload($event)}}}),_c('div',{staticClass:\"identity-info\"},[_c('span',{staticClass:\"h4 font-weight-bolder\"},[_vm._v(\"用户昵称： \"+_vm._s(_vm.userInfo.nickname))]),_c('span',{staticClass:\"h6 username\"},[_vm._v(\"用户ID： \"+_vm._s(_vm.userInfo.username))])])],1),_c('hr'),_c('div',{staticClass:\"edit-appearance\"},[_c('label',{staticClass:\"font-weight-bolder mb-2 text-primary\"},[_vm._v(\"修改昵称：\")]),_c('el-input',{attrs:{\"id\":\"editUname\",\"placeholder\":\"请输入您的新昵称\"},model:{value:(_vm.editUname),callback:function ($$v) {_vm.editUname=$$v},expression:\"editUname\"}}),_c('hr'),_c('div',{staticClass:\"submit\"},[_c('button',{staticClass:\"btn btn-success\",on:{\"click\":_vm.modificationInfo}},[_vm._v(\"确认修改\")])])],1),_c('hr'),_vm._m(0)])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',[_c('span',{staticClass:\"text-danger\"},[_vm._v(\"Tips: 更新不及时请刷新页面\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"card\" id=\"AccountSettingGeneral\">\n    <div class=\"card-body\">\n      <div class=\"appearance\">\n        <el-tooltip class=\"item\" content=\"点我更改头像\" placement=\"top\">\n          <div @click=\"changePhoto\">\n            <vs-avatar size=\"80\">\n              <img :src=\"userInfo.userphoto\" alt=\"\" />\n            </vs-avatar>\n          </div>\n        </el-tooltip>\n        <input type=\"file\" ref=\"file\" style=\"display: none\" v-on:change=\"handleFileUpload($event)\" />\n        <div class=\"identity-info\">\n          <span class=\"h4 font-weight-bolder\">用户昵称： {{ userInfo.nickname }}</span>\n          <span class=\"h6 username\">用户ID： {{ userInfo.username }}</span>\n        </div>\n      </div>\n      <hr />\n      <div class=\"edit-appearance\">\n        <label class=\"font-weight-bolder mb-2 text-primary\">修改昵称：</label>\n        <el-input id=\"editUname\" v-model=\"editUname\" placeholder=\"请输入您的新昵称\"></el-input>\n\n        <hr />\n        <div class=\"submit\">\n          <button class=\"btn btn-success\" @click=\"modificationInfo\">确认修改</button>\n        </div>\n      </div>\n      <hr />\n      <div>\n        <span class=\"text-danger\">Tips: 更新不及时请刷新页面</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { modification } from \"@/scripts/auth\";\nimport request from \"@/scripts/utils/request\";\n\nexport default {\n  name: \"General\",\n  data() {\n    return {\n      editUname: \"\",\n    };\n  },\n  computed: {\n    userInfo() {\n      return this.$store.state.userData.user.info;\n    },\n  },\n  async mounted() {},\n  methods: {\n    changePhoto() {\n      this.$refs.file.click();\n    },\n    // 获取文件\n    handleFileUpload(event) {\n      event.preventDefault();\n      let formData = new FormData();\n      let file = this.$refs.file.files[0];\n      formData.append(\"file\", file);\n      this.onUpload(formData);\n    },\n    // 上传文件\n    onUpload(formData) {\n      request(\"utils/request\", {\n        vc: this,\n        method: \"post\",\n        url: \"/user/modification/avatar\",\n        ignore: true, // 不自动配置 strifty data 和 请求头\n        data: formData,\n      }).then((res) => {\n        if (res.data.status === 1) {\n          this.$message.success(\"上传成功\");\n          this.$store.state.userData.pullData(true);\n        }\n      });\n    },\n    modificationInfo() {\n      if (this.editUname === \"\") {\n        return;\n      }\n      this.$swal({\n        title: \"确认修改昵称？\",\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonText: \"确认\",\n        cancelButtonText: \"取消\",\n      }).then((resp) => {\n        if (resp.isConfirmed) {\n          modification({\n            nickname: this.editUname,\n          }).then(this.$store.state.userData.pullData(true));\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.btn {\n  padding: 10px;\n}\n#AccountSettingGeneral {\n  .appearance {\n    display: flex;\n  }\n  .user-photo {\n    // height: 120px;\n    border-radius: 50%;\n    cursor: pointer;\n  }\n  .identity-info {\n    margin-left: 20px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n  }\n  .edit-appearance {\n    display: flex;\n    flex-direction: column;\n    // margin-top: 20px;\n\n    .submit {\n      align-self: flex-end;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./General.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./General.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./General.vue?vue&type=template&id=6d0fb7c4&scoped=true\"\nimport script from \"./General.vue?vue&type=script&lang=js\"\nexport * from \"./General.vue?vue&type=script&lang=js\"\nimport style0 from \"./General.vue?vue&type=style&index=0&id=6d0fb7c4&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d0fb7c4\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","changePhoto","userInfo","userphoto","ref","staticStyle","$event","handleFileUpload","_v","_s","nickname","username","model","value","editUname","callback","$$v","expression","modificationInfo","_m","staticRenderFns","name","data","computed","$store","state","userData","user","info","mounted","methods","$refs","file","click","event","preventDefault","formData","FormData","files","append","onUpload","request","vc","method","url","ignore","then","res","status","$message","success","pullData","$swal","title","icon","showCancelButton","confirmButtonText","cancelButtonText","resp","isConfirmed","modification","component"],"sourceRoot":""}