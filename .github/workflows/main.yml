name: Build Vue 2 App 
on: 
  push: 
    branches: 
      - main # 触发构建的分支 
  workflow_dispatch: # 允许手动触发工作流程 
  
jobs: 
  build: 
    runs-on: ubuntu-latest 
    steps: 
    - name: Checkout Source Code 
      uses: actions/checkout@v3 
      with: 
        repository: CNXiaozhiy/FMAXC-WEB-VUE2
        github_token: ${{ secrets.SECRET_TTOKEN }} # 使用 PAT 访问私有仓库 
        
    - name: Set up Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '14'
 
    - name: Install dependencies
      run: npm install
 
    - name: Build
      run: npm run build

    - name: Deploy to GitHub Pages
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.SECRET_TTOKEN }}  # 此处修改为你的Secret名称
        publish_dir: ./dist
